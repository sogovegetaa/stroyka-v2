{"ast":null,"code":"var _jsxFileName = \"C:\\\\Mustax\\\\qwe\\\\stroyka-tools-store-react-ecommerce-template-23909258-master\\\\src\\\\components\\\\header\\\\Departments.jsx\";\n// react\nimport React, { Component } from 'react'; // application\n\nimport departmentsArea from '../../services/departmentsArea';\nimport DepartmentsLinks from './DepartmentsLinks';\nimport { Menu18x14Svg, ArrowRoundedDown9x6Svg } from '../../svg';\nimport { FormattedMessage } from 'react-intl';\n\nclass Departments extends Component {\n  constructor(props) {\n    super(props);\n\n    this.unsubscribeAria = () => {};\n\n    this.setWrapperRef = node => {\n      this.wrapperRef = node;\n    };\n\n    this.handleOutsideClick = event => {\n      if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n        this.setState(() => ({\n          open: false\n        }));\n      }\n    };\n\n    this.handleButtonClick = () => {\n      this.setState(state => ({\n        open: !state.open\n      }));\n    };\n\n    this.handleTransitionEnd = event => {\n      if (this.wrapperRef && event.propertyName === 'height') {\n        this.wrapperRef.querySelector('.departments__links-wrapper').style.height = '';\n        this.wrapperRef.classList.remove('departments--transition');\n      }\n    };\n\n    this.state = {\n      open: false,\n      fixed: false,\n      area: null\n    };\n  }\n\n  componentDidMount() {\n    document.addEventListener('mousedown', this.handleOutsideClick);\n    this.unsubscribeAria = departmentsArea.subscribe(area => {\n      this.setState({\n        fixed: !!area,\n        area\n      });\n    });\n    this.setState({\n      fixed: !!departmentsArea.area,\n      area: departmentsArea.area\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const _this$state = this.state,\n          fixed = _this$state.fixed,\n          area = _this$state.area,\n          open = _this$state.open;\n\n    if (prevState.fixed !== fixed) {\n      const root = this.wrapperRef;\n      const content = root.querySelector('.departments__links-wrapper');\n\n      if (fixed) {\n        const areaRect = area.getBoundingClientRect();\n        const areaBottom = areaRect.top + areaRect.height + window.scrollY;\n        root.classList.remove('departments--transition');\n        root.classList.add('departments--fixed', 'departments--opened');\n        const height = areaBottom - (content.getBoundingClientRect().top + window.scrollY);\n        content.style.height = \"\".concat(height, \"px\");\n        content.getBoundingClientRect(); // force reflow\n      } else {\n        root.classList.remove('departments--opened', 'departments--fixed');\n        content.style.height = '';\n      }\n    } else if (!fixed) {\n      if (open) {\n        const root = this.wrapperRef;\n        const content = root.querySelector('.departments__links-wrapper');\n        content.getBoundingClientRect(); // force reflow\n\n        const startHeight = content.getBoundingClientRect().height;\n        root.classList.add('departments--transition', 'departments--opened');\n        const endHeight = content.getBoundingClientRect().height;\n        content.style.height = \"\".concat(startHeight, \"px\");\n        content.getBoundingClientRect(); // force reflow\n\n        content.style.height = \"\".concat(endHeight, \"px\");\n      } else {\n        const root = this.wrapperRef;\n        const content = root.querySelector('.departments__links-wrapper');\n        const startHeight = content.getBoundingClientRect().height;\n        content.style.height = \"\".concat(startHeight, \"px\");\n        root.classList.add('departments--transition');\n        root.classList.remove('departments--opened');\n        content.getBoundingClientRect(); // force reflow\n\n        content.style.height = '';\n      }\n    }\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('mousedown', this.handleOutsideClick);\n    this.unsubscribeAria();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"departments\",\n      ref: this.setWrapperRef,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"departments__body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"departments__links-wrapper\",\n      onTransitionEnd: this.handleTransitionEnd,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(DepartmentsLinks, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }))), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"departments__button\",\n      onClick: this.handleButtonClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(Menu18x14Svg, {\n      className: \"departments__button-icon\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }), \"s\", React.createElement(FormattedMessage, {\n      id: \"departments.products\",\n      defaultMessage: \"produits\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(ArrowRoundedDown9x6Svg, {\n      className: \"departments__button-arrow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Departments;","map":{"version":3,"sources":["C:\\Mustax\\qwe\\stroyka-tools-store-react-ecommerce-template-23909258-master\\src\\components\\header\\Departments.jsx"],"names":["React","Component","departmentsArea","DepartmentsLinks","Menu18x14Svg","ArrowRoundedDown9x6Svg","FormattedMessage","Departments","constructor","props","unsubscribeAria","setWrapperRef","node","wrapperRef","handleOutsideClick","event","contains","target","setState","open","handleButtonClick","state","handleTransitionEnd","propertyName","querySelector","style","height","classList","remove","fixed","area","componentDidMount","document","addEventListener","subscribe","componentDidUpdate","prevProps","prevState","root","content","areaRect","getBoundingClientRect","areaBottom","top","window","scrollY","add","startHeight","endHeight","componentWillUnmount","removeEventListener","render"],"mappings":"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","sourcesContent":["// react\nimport React, { Component } from 'react';\n\n// application\nimport departmentsArea from '../../services/departmentsArea';\nimport DepartmentsLinks from './DepartmentsLinks';\nimport { Menu18x14Svg, ArrowRoundedDown9x6Svg } from '../../svg';\nimport { FormattedMessage } from 'react-intl';\n\n\nclass Departments extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            open: false,\n            fixed: false,\n            area: null,\n        };\n    }\n\n    componentDidMount() {\n        document.addEventListener('mousedown', this.handleOutsideClick);\n\n        this.unsubscribeAria = departmentsArea.subscribe((area) => {\n            this.setState({\n                fixed: !!area,\n                area,\n            });\n        });\n\n        this.setState({\n            fixed: !!departmentsArea.area,\n            area: departmentsArea.area,\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        const { fixed, area, open } = this.state;\n\n        if (prevState.fixed !== fixed) {\n            const root = this.wrapperRef;\n            const content = root.querySelector('.departments__links-wrapper');\n\n            if (fixed) {\n                const areaRect = area.getBoundingClientRect();\n                const areaBottom = areaRect.top + areaRect.height + window.scrollY;\n\n                root.classList.remove('departments--transition');\n                root.classList.add('departments--fixed', 'departments--opened');\n\n                const height = areaBottom - (content.getBoundingClientRect().top + window.scrollY);\n\n                content.style.height = `${height}px`;\n                content.getBoundingClientRect(); // force reflow\n            } else {\n                root.classList.remove('departments--opened', 'departments--fixed');\n                content.style.height = '';\n            }\n        } else if (!fixed) {\n            if (open) {\n                const root = this.wrapperRef;\n\n                const content = root.querySelector('.departments__links-wrapper');\n                content.getBoundingClientRect(); // force reflow\n                const startHeight = content.getBoundingClientRect().height;\n\n                root.classList.add('departments--transition', 'departments--opened');\n\n                const endHeight = content.getBoundingClientRect().height;\n\n                content.style.height = `${startHeight}px`;\n                content.getBoundingClientRect(); // force reflow\n                content.style.height = `${endHeight}px`;\n            } else {\n                const root = this.wrapperRef;\n                const content = root.querySelector('.departments__links-wrapper');\n                const startHeight = content.getBoundingClientRect().height;\n\n                content.style.height = `${startHeight}px`;\n\n                root.classList.add('departments--transition');\n                root.classList.remove('departments--opened');\n\n                content.getBoundingClientRect(); // force reflow\n                content.style.height = '';\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener('mousedown', this.handleOutsideClick);\n\n        this.unsubscribeAria();\n    }\n\n    unsubscribeAria = () => {};\n\n    setWrapperRef = (node) => {\n        this.wrapperRef = node;\n    };\n\n    handleOutsideClick = (event) => {\n        if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n            this.setState(() => ({\n                open: false,\n            }));\n        }\n    };\n\n    handleButtonClick = () => {\n        this.setState((state) => ({\n            open: !state.open,\n        }));\n    };\n\n    handleTransitionEnd = (event) => {\n        if (this.wrapperRef && event.propertyName === 'height') {\n            this.wrapperRef.querySelector('.departments__links-wrapper').style.height = '';\n            this.wrapperRef.classList.remove('departments--transition');\n        }\n    };\n\n    render() {\n        return (\n            <div className=\"departments\" ref={this.setWrapperRef}>\n                <div className=\"departments__body\">\n                    <div className=\"departments__links-wrapper\" onTransitionEnd={this.handleTransitionEnd}>\n                        <DepartmentsLinks />\n                    </div>\n                </div>\n\n                <button type=\"button\" className=\"departments__button\" onClick={this.handleButtonClick}>\n                    <Menu18x14Svg className=\"departments__button-icon\" />s\n                     <FormattedMessage id=\"departments.products\" defaultMessage=\"produits\" />\n                    <ArrowRoundedDown9x6Svg className=\"departments__button-arrow\" />\n                </button>\n            </div>\n        );\n    }\n}\n\nexport default Departments;\n"]},"metadata":{},"sourceType":"module"}