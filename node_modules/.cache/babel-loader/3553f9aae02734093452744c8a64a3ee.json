{"ast":null,"code":"var _jsxFileName = \"C:\\\\Mustax\\\\qwe\\\\stroyka-tools-store-react-ecommerce-template-23909258-master\\\\src\\\\components\\\\shared\\\\ProductGallery.jsx\";\n// react\nimport React, { Component } from 'react'; // third-party\n\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom'; // application\n\nimport SlickWithPreventSwipeClick from './SlickWithPreventSwipeClick';\nconst slickSettingsFeatured = {\n  dots: false,\n  arrows: false,\n  infinite: false,\n  speed: 400,\n  slidesToShow: 1,\n  slidesToScroll: 1\n};\nconst slickSettingsThumbnails = {\n  standard: {\n    dots: false,\n    arrows: false,\n    infinite: false,\n    speed: 400,\n    slidesToShow: 5,\n    slidesToScroll: 1,\n    responsive: [{\n      breakpoint: 1199,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 991,\n      settings: {\n        slidesToShow: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 5\n      }\n    }, {\n      breakpoint: 479,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 379,\n      settings: {\n        slidesToShow: 3\n      }\n    }]\n  },\n  sidebar: {\n    dots: false,\n    arrows: false,\n    infinite: false,\n    speed: 400,\n    slidesToShow: 4,\n    slidesToScroll: 1,\n    responsive: [{\n      breakpoint: 1199,\n      settings: {\n        slidesToShow: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 5\n      }\n    }, {\n      breakpoint: 479,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 379,\n      settings: {\n        slidesToShow: 3\n      }\n    }]\n  },\n  columnar: {\n    dots: false,\n    arrows: false,\n    infinite: false,\n    speed: 400,\n    slidesToShow: 4,\n    slidesToScroll: 1,\n    responsive: [{\n      breakpoint: 1199,\n      settings: {\n        slidesToShow: 3\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 5\n      }\n    }, {\n      breakpoint: 479,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 379,\n      settings: {\n        slidesToShow: 3\n      }\n    }]\n  },\n  quickview: {\n    dots: false,\n    arrows: false,\n    infinite: false,\n    speed: 400,\n    slidesToShow: 5,\n    slidesToScroll: 1,\n    responsive: [{\n      breakpoint: 1199,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 767,\n      settings: {\n        slidesToShow: 5\n      }\n    }, {\n      breakpoint: 479,\n      settings: {\n        slidesToShow: 4\n      }\n    }, {\n      breakpoint: 379,\n      settings: {\n        slidesToShow: 3\n      }\n    }]\n  }\n};\n\nclass ProductGallery extends Component {\n  /** @var {Promise} */\n  constructor(props) {\n    super(props);\n    this.createGallery = null;\n    this.imagesRefs = [];\n    this.unmounted = false;\n\n    this.handleFeaturedClick = (event, index) => {\n      if (!this.createGallery) {\n        return;\n      }\n\n      event.preventDefault();\n      const images = this.props.images;\n      const items = images.map(image => ({\n        src: image,\n        msrc: image,\n        w: 700,\n        h: 700\n      }));\n      const options = {\n        getThumbBoundsFn: index => {\n          if (!this.imagesRefs[index]) {\n            return null;\n          }\n\n          const imageElement = this.imagesRefs[index];\n          const pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n          const rect = imageElement.getBoundingClientRect();\n          return {\n            x: rect.left,\n            y: rect.top + pageYScroll,\n            w: rect.width\n          };\n        },\n        index,\n        bgOpacity: 0.9,\n        history: false\n      };\n      this.createGallery.then(createGallery => {\n        if (this.unmounted) {\n          return;\n        }\n\n        this.gallery = createGallery(items, options);\n        this.gallery.listen('beforeChange', () => {\n          if (this.gallery && this.slickFeaturedRef) {\n            this.slickFeaturedRef.slickGoTo(this.gallery.getCurrentIndex(), true);\n          }\n        });\n        this.gallery.listen('destroy', () => {\n          this.gallery = null;\n        });\n        this.gallery.init();\n      });\n    };\n\n    this.handleThumbnailClick = index => {\n      const transition = this.state.transition;\n\n      if (transition) {\n        return;\n      }\n\n      this.setState(() => ({\n        currentIndex: index\n      }));\n\n      if (this.slickFeaturedRef) {\n        this.slickFeaturedRef.slickGoTo(index);\n      }\n    };\n\n    this.handleFeaturedBeforeChange = (oldIndex, newIndex) => {\n      this.setState(() => ({\n        currentIndex: newIndex,\n        transition: true\n      }));\n    };\n\n    this.handleFeaturedAfterChange = index => {\n      this.setState(() => ({\n        currentIndex: index,\n        transition: false\n      }));\n    };\n\n    this.setSlickFeaturedRef = ref => {\n      this.slickFeaturedRef = ref;\n    };\n\n    this.state = {\n      currentIndex: 0,\n      transition: false\n    };\n  }\n\n  componentDidMount() {\n    this.createGallery = import('../../photoswipe').then(module => module.createGallery);\n  }\n\n  componentWillUnmount() {\n    if (this.gallery) {\n      this.gallery.destroy();\n    }\n\n    this.unmounted = true;\n  }\n\n  render() {\n    const _this$props = this.props,\n          layout = _this$props.layout,\n          images = _this$props.images;\n    const currentIndex = this.state.currentIndex;\n    const featured = images.map((image, index) => React.createElement(Link, {\n      key: index,\n      to: \"/\".concat(image),\n      onClick: event => this.handleFeaturedClick(event, index),\n      target: \"_blank\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: image,\n      alt: \"\",\n      ref: element => {\n        this.imagesRefs[index] = element;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    })));\n    const thumbnails = images.map((image, index) => {\n      const classes = classNames('product-gallery__carousel-item', {\n        'product-gallery__carousel-item--active': index === currentIndex\n      });\n      return React.createElement(\"button\", {\n        type: \"button\",\n        key: index,\n        onClick: () => this.handleThumbnailClick(index),\n        className: classes,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"product-gallery__carousel-image\",\n        src: image,\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }));\n    });\n    return React.createElement(\"div\", {\n      className: \"product__gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"product-gallery__featured\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, React.createElement(SlickWithPreventSwipeClick, Object.assign({\n      ref: this.setSlickFeaturedRef\n    }, slickSettingsFeatured, {\n      beforeChange: this.handleFeaturedBeforeChange,\n      afterChange: this.handleFeaturedAfterChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), featured)), React.createElement(\"div\", {\n      className: \"product-gallery__carousel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(SlickWithPreventSwipeClick, Object.assign({}, slickSettingsThumbnails[layout], {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), thumbnails))));\n  }\n\n}\n\nProductGallery.propTypes = {\n  images: PropTypes.array,\n  layout: PropTypes.oneOf(['standard', 'sidebar', 'columnar', 'quickview'])\n};\nProductGallery.defaultProps = {\n  images: [],\n  layout: 'standard'\n};\nexport default ProductGallery;","map":{"version":3,"sources":["C:\\Mustax\\qwe\\stroyka-tools-store-react-ecommerce-template-23909258-master\\src\\components\\shared\\ProductGallery.jsx"],"names":["React","Component","classNames","PropTypes","Link","SlickWithPreventSwipeClick","slickSettingsFeatured","dots","arrows","infinite","speed","slidesToShow","slidesToScroll","slickSettingsThumbnails","standard","responsive","breakpoint","settings","sidebar","columnar","quickview","ProductGallery","constructor","props","createGallery","imagesRefs","unmounted","handleFeaturedClick","event","index","preventDefault","images","items","map","image","src","msrc","w","h","options","getThumbBoundsFn","imageElement","pageYScroll","window","pageYOffset","document","documentElement","scrollTop","rect","getBoundingClientRect","x","left","y","top","width","bgOpacity","history","then","gallery","listen","slickFeaturedRef","slickGoTo","getCurrentIndex","init","handleThumbnailClick","transition","state","setState","currentIndex","handleFeaturedBeforeChange","oldIndex","newIndex","handleFeaturedAfterChange","setSlickFeaturedRef","ref","componentDidMount","module","componentWillUnmount","destroy","render","layout","featured","element","thumbnails","classes","propTypes","array","oneOf","defaultProps"],"mappings":"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","sourcesContent":["// react\nimport React, { Component } from 'react';\n\n// third-party\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { Link } from 'react-router-dom';\n\n// application\nimport SlickWithPreventSwipeClick from './SlickWithPreventSwipeClick';\n\n\nconst slickSettingsFeatured = {\n    dots: false,\n    arrows: false,\n    infinite: false,\n    speed: 400,\n    slidesToShow: 1,\n    slidesToScroll: 1,\n};\nconst slickSettingsThumbnails = {\n    standard: {\n        dots: false,\n        arrows: false,\n        infinite: false,\n        speed: 400,\n        slidesToShow: 5,\n        slidesToScroll: 1,\n        responsive: [\n            { breakpoint: 1199, settings: { slidesToShow: 4 } },\n            { breakpoint: 991, settings: { slidesToShow: 3 } },\n            { breakpoint: 767, settings: { slidesToShow: 5 } },\n            { breakpoint: 479, settings: { slidesToShow: 4 } },\n            { breakpoint: 379, settings: { slidesToShow: 3 } },\n        ],\n    },\n    sidebar: {\n        dots: false,\n        arrows: false,\n        infinite: false,\n        speed: 400,\n        slidesToShow: 4,\n        slidesToScroll: 1,\n        responsive: [\n            { breakpoint: 1199, settings: { slidesToShow: 3 } },\n            { breakpoint: 767, settings: { slidesToShow: 5 } },\n            { breakpoint: 479, settings: { slidesToShow: 4 } },\n            { breakpoint: 379, settings: { slidesToShow: 3 } },\n        ],\n    },\n    columnar: {\n        dots: false,\n        arrows: false,\n        infinite: false,\n        speed: 400,\n        slidesToShow: 4,\n        slidesToScroll: 1,\n        responsive: [\n            { breakpoint: 1199, settings: { slidesToShow: 3 } },\n            { breakpoint: 767, settings: { slidesToShow: 5 } },\n            { breakpoint: 479, settings: { slidesToShow: 4 } },\n            { breakpoint: 379, settings: { slidesToShow: 3 } },\n        ],\n    },\n    quickview: {\n        dots: false,\n        arrows: false,\n        infinite: false,\n        speed: 400,\n        slidesToShow: 5,\n        slidesToScroll: 1,\n        responsive: [\n            { breakpoint: 1199, settings: { slidesToShow: 4 } },\n            { breakpoint: 767, settings: { slidesToShow: 5 } },\n            { breakpoint: 479, settings: { slidesToShow: 4 } },\n            { breakpoint: 379, settings: { slidesToShow: 3 } },\n        ],\n    },\n};\n\nclass ProductGallery extends Component {\n    gallery;\n\n    /** @var {Promise} */\n    createGallery = null;\n\n    imagesRefs = [];\n\n    unmounted = false;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            currentIndex: 0,\n            transition: false,\n        };\n    }\n\n    componentDidMount() {\n        this.createGallery = import('../../photoswipe').then((module) => module.createGallery);\n    }\n\n    componentWillUnmount() {\n        if (this.gallery) {\n            this.gallery.destroy();\n        }\n\n        this.unmounted = true;\n    }\n\n    handleFeaturedClick = (event, index) => {\n        if (!this.createGallery) {\n            return;\n        }\n\n        event.preventDefault();\n\n        const { images } = this.props;\n        const items = images.map((image) => ({\n            src: image,\n            msrc: image,\n            w: 700,\n            h: 700,\n        }));\n\n        const options = {\n            getThumbBoundsFn: (index) => {\n                if (!this.imagesRefs[index]) {\n                    return null;\n                }\n\n                const imageElement = this.imagesRefs[index];\n                const pageYScroll = window.pageYOffset || document.documentElement.scrollTop;\n                const rect = imageElement.getBoundingClientRect();\n\n                return {\n                    x: rect.left,\n                    y: rect.top + pageYScroll,\n                    w: rect.width,\n                };\n            },\n            index,\n            bgOpacity: 0.9,\n            history: false,\n        };\n\n        this.createGallery.then((createGallery) => {\n            if (this.unmounted) {\n                return;\n            }\n\n            this.gallery = createGallery(items, options);\n\n            this.gallery.listen('beforeChange', () => {\n                if (this.gallery && this.slickFeaturedRef) {\n                    this.slickFeaturedRef.slickGoTo(this.gallery.getCurrentIndex(), true);\n                }\n            });\n            this.gallery.listen('destroy', () => {\n                this.gallery = null;\n            });\n\n            this.gallery.init();\n        });\n    };\n\n    handleThumbnailClick = (index) => {\n        const { transition } = this.state;\n\n        if (transition) {\n            return;\n        }\n\n        this.setState(() => ({ currentIndex: index }));\n\n        if (this.slickFeaturedRef) {\n            this.slickFeaturedRef.slickGoTo(index);\n        }\n    };\n\n    handleFeaturedBeforeChange = (oldIndex, newIndex) => {\n        this.setState(() => ({\n            currentIndex: newIndex,\n            transition: true,\n        }));\n    };\n\n    handleFeaturedAfterChange = (index) => {\n        this.setState(() => ({\n            currentIndex: index,\n            transition: false,\n        }));\n    };\n\n    setSlickFeaturedRef = (ref) => {\n        this.slickFeaturedRef = ref;\n    };\n\n    render() {\n        const { layout, images } = this.props;\n        const { currentIndex } = this.state;\n\n        const featured = images.map((image, index) => (\n            <Link key={index} to={`/${image}`} onClick={(event) => this.handleFeaturedClick(event, index)} target=\"_blank\">\n                <img src={image} alt=\"\" ref={(element) => { this.imagesRefs[index] = element; }} />\n            </Link>\n        ));\n\n        const thumbnails = images.map((image, index) => {\n            const classes = classNames('product-gallery__carousel-item', {\n                'product-gallery__carousel-item--active': index === currentIndex,\n            });\n\n            return (\n                <button\n                    type=\"button\"\n                    key={index}\n                    onClick={() => this.handleThumbnailClick(index)}\n                    className={classes}\n                >\n                    <img className=\"product-gallery__carousel-image\" src={image} alt=\"\" />\n                </button>\n            );\n        });\n\n        return (\n            <div className=\"product__gallery\">\n                <div className=\"product-gallery\">\n                    <div className=\"product-gallery__featured\">\n                        <SlickWithPreventSwipeClick\n                            ref={this.setSlickFeaturedRef}\n                            {...slickSettingsFeatured}\n                            beforeChange={this.handleFeaturedBeforeChange}\n                            afterChange={this.handleFeaturedAfterChange}\n                        >\n                            {featured}\n                        </SlickWithPreventSwipeClick>\n                    </div>\n                    <div className=\"product-gallery__carousel\">\n                        <SlickWithPreventSwipeClick {...slickSettingsThumbnails[layout]}>\n                            {thumbnails}\n                        </SlickWithPreventSwipeClick>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nProductGallery.propTypes = {\n    images: PropTypes.array,\n    layout: PropTypes.oneOf(['standard', 'sidebar', 'columnar', 'quickview']),\n};\n\nProductGallery.defaultProps = {\n    images: [],\n    layout: 'standard',\n};\n\nexport default ProductGallery;\n"]},"metadata":{},"sourceType":"module"}