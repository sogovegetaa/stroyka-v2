{"ast":null,"code":"// react\nimport { Component } from 'react'; // third-party\n\nimport PropTypes from 'prop-types';\n\nclass AsyncAction extends Component {\n  constructor(props) {\n    super(props);\n    this.canceled = false;\n\n    this.run = () => {\n      const action = this.props.action;\n      const loading = this.state.loading;\n\n      if (loading || !action) {\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n      action().then(() => {\n        if (this.canceled) {\n          return;\n        }\n\n        this.setState({\n          loading: false\n        });\n      });\n    };\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  componentWillUnmount() {\n    this.canceled = true;\n  }\n\n  render() {\n    const render = this.props.render;\n    const loading = this.state.loading;\n\n    if (render) {\n      return render({\n        run: this.run,\n        loading\n      });\n    }\n\n    return null;\n  }\n\n}\n\nAsyncAction.propTypes = {\n  action: PropTypes.func,\n  render: PropTypes.func\n};\nexport default AsyncAction;","map":{"version":3,"sources":["C:\\Mustax\\qwe\\stroyka-tools-store-react-ecommerce-template-23909258-master\\src\\components\\shared\\AsyncAction.jsx"],"names":["Component","PropTypes","AsyncAction","constructor","props","canceled","run","action","loading","state","setState","then","componentWillUnmount","render","propTypes","func"],"mappings":"AAAA;AACA,SAASA,SAAT,QAA0B,OAA1B,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,YAAtB;;AAGA,MAAMC,WAAN,SAA0BF,SAA1B,CAAoC;AAGhCG,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SAFnBC,QAEmB,GAFR,KAEQ;;AAAA,SAYnBC,GAZmB,GAYb,MAAM;AAAA,YACAC,MADA,GACW,KAAKH,KADhB,CACAG,MADA;AAAA,YAEAC,OAFA,GAEY,KAAKC,KAFjB,CAEAD,OAFA;;AAIR,UAAIA,OAAO,IAAI,CAACD,MAAhB,EAAwB;AACpB;AACH;;AAED,WAAKG,QAAL,CAAc;AAAEF,QAAAA,OAAO,EAAE;AAAX,OAAd;AAEAD,MAAAA,MAAM,GAAGI,IAAT,CAAc,MAAM;AAChB,YAAI,KAAKN,QAAT,EAAmB;AACf;AACH;;AAED,aAAKK,QAAL,CAAc;AAAEF,UAAAA,OAAO,EAAE;AAAX,SAAd;AACH,OAND;AAOH,KA7BkB;;AAGf,SAAKC,KAAL,GAAa;AACTD,MAAAA,OAAO,EAAE;AADA,KAAb;AAGH;;AAEDI,EAAAA,oBAAoB,GAAG;AACnB,SAAKP,QAAL,GAAgB,IAAhB;AACH;;AAqBDQ,EAAAA,MAAM,GAAG;AAAA,UACGA,MADH,GACc,KAAKT,KADnB,CACGS,MADH;AAAA,UAEGL,OAFH,GAEe,KAAKC,KAFpB,CAEGD,OAFH;;AAIL,QAAIK,MAAJ,EAAY;AACR,aAAOA,MAAM,CAAC;AAAEP,QAAAA,GAAG,EAAE,KAAKA,GAAZ;AAAiBE,QAAAA;AAAjB,OAAD,CAAb;AACH;;AAED,WAAO,IAAP;AACH;;AA3C+B;;AA8CpCN,WAAW,CAACY,SAAZ,GAAwB;AACpBP,EAAAA,MAAM,EAAEN,SAAS,CAACc,IADE;AAEpBF,EAAAA,MAAM,EAAEZ,SAAS,CAACc;AAFE,CAAxB;AAKA,eAAeb,WAAf","sourcesContent":["// react\nimport { Component } from 'react';\n\n// third-party\nimport PropTypes from 'prop-types';\n\n\nclass AsyncAction extends Component {\n    canceled = false;\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loading: false,\n        };\n    }\n\n    componentWillUnmount() {\n        this.canceled = true;\n    }\n\n    run = () => {\n        const { action } = this.props;\n        const { loading } = this.state;\n\n        if (loading || !action) {\n            return;\n        }\n\n        this.setState({ loading: true });\n\n        action().then(() => {\n            if (this.canceled) {\n                return;\n            }\n\n            this.setState({ loading: false });\n        });\n    };\n\n    render() {\n        const { render } = this.props;\n        const { loading } = this.state;\n\n        if (render) {\n            return render({ run: this.run, loading });\n        }\n\n        return null;\n    }\n}\n\nAsyncAction.propTypes = {\n    action: PropTypes.func,\n    render: PropTypes.func,\n};\n\nexport default AsyncAction;\n"]},"metadata":{},"sourceType":"module"}