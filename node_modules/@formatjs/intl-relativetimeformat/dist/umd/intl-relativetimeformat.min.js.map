{"version":3,"file":"intl-relativetimeformat.min.js","sources":["../../lib/types.js","../../lib/core.js","../../lib/index.js","../../lib/en.js"],"sourcesContent":["export var VALID_UNITS = [\n    'second',\n    'minute',\n    'hour',\n    'day',\n    'week',\n    'month',\n    'quarter',\n    'year',\n    'seconds',\n    'minutes',\n    'hours',\n    'days',\n    'weeks',\n    'months',\n    'quarters',\n    'years',\n];\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { VALID_UNITS, } from './types';\n/**\n * Find the correct field data in our CLDR data\n * @param locale locale\n */\nfunction findFields(locale) {\n    var localeData = RelativeTimeFormat.__localeData__;\n    var data = localeData[locale.toLowerCase()];\n    // The locale data is de-duplicated, so we have to traverse the locale's\n    // hierarchy until we find `fields` to return.\n    while (data) {\n        if (data.fields) {\n            return data.fields;\n        }\n        data = data.parentLocale\n            ? localeData[data.parentLocale.toLowerCase()]\n            : undefined;\n    }\n    throw new Error(\"Locale data added to RelativeTimeFormat is missing 'fields' for \\\"\" + locale + \"\\\"\");\n}\nfunction resolveLocale(locales) {\n    var localeData = RelativeTimeFormat.__localeData__, languageAliases = RelativeTimeFormat.__languageAliases__;\n    var resolvedLocales = (Array.isArray(locales) ? locales : [locales])\n        .filter(function (s) { return typeof s === 'string'; })\n        .map(function (l) { return languageAliases[l] || l; });\n    var i, len, localeParts, data;\n    var supportedLocales = [];\n    // Using the set of locales + the default locale, we look for the first one\n    // which that has been registered. When data does not exist for a locale, we\n    // traverse its ancestors to find something that's been registered within\n    // its hierarchy of locales. Since we lack the proper `parentLocale` data\n    // here, we must take a naive approach to traversal.\n    for (i = 0, len = resolvedLocales.length; i < len; i += 1) {\n        localeParts = resolvedLocales[i].toLowerCase().split('-');\n        while (localeParts.length) {\n            data = localeData[localeParts.join('-')];\n            if (data) {\n                // Return the normalized locale string; e.g., we return \"en-US\",\n                // instead of \"en-us\".\n                supportedLocales.push(data.locale);\n                break;\n            }\n            localeParts.pop();\n        }\n    }\n    return supportedLocales;\n}\nfunction findFieldData(fields, unit, style) {\n    if (style == 'long') {\n        return fields[unit];\n    }\n    if (style == 'narrow') {\n        return (fields[unit + \"-narrow\"] ||\n            fields[unit + \"-short\"]);\n    }\n    return fields[unit + \"-short\"];\n}\nfunction objectIs(x, y) {\n    if (Object.is) {\n        return Object.is(x, y);\n    }\n    // SameValue algorithm\n    if (x === y) {\n        // Steps 1-5, 7-10\n        // Steps 6.b-6.e: +0 != -0\n        return x !== 0 || 1 / x === 1 / y;\n    }\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n}\nfunction resolvePastOrFuture(value) {\n    return objectIs(value, -0)\n        ? 'past'\n        : objectIs(value, +0)\n            ? 'future'\n            : value < 0\n                ? 'past'\n                : 'future';\n}\nfunction validateInstance(instance, method) {\n    if (!(instance instanceof RelativeTimeFormat)) {\n        throw new TypeError(\"Method Intl.RelativeTimeFormat.prototype.\" + method + \" called on incompatible receiver \" + String(instance));\n    }\n}\nfunction validateUnit(unit) {\n    // `unit + ''` to guard against `Symbol()`\n    if (!~VALID_UNITS.indexOf(unit + '')) {\n        throw new RangeError(\"Invalid unit argument for format() '\" + String(unit) + \"'\");\n    }\n    var resolvedUnit = (unit[unit.length - 1] === 's'\n        ? unit.slice(0, unit.length - 1)\n        : unit);\n    return resolvedUnit;\n}\nfunction validateValue(value, method) {\n    if (method === void 0) { method = 'format'; }\n    var parsedValue = typeof value === 'string' ? new Number(value).valueOf() : value;\n    if (!isFinite(parsedValue)) {\n        throw new RangeError(\"Value need to be finite number for Intl.RelativeTimeFormat.prototype.\" + method + \"()\");\n    }\n    return parsedValue;\n}\nfunction isString(s) {\n    return !!s;\n}\nfunction toObject(arg) {\n    if (arg == null) {\n        throw new TypeError('undefined/null cannot be converted to object');\n    }\n    return Object(arg);\n}\n/**\n * https://tc39.es/ecma402/#sec-getoption\n * @param opts\n * @param prop\n * @param type\n * @param values\n * @param fallback\n */\nfunction getOption(opts, prop, type, values, fallback) {\n    // const descriptor = Object.getOwnPropertyDescriptor(opts, prop);\n    var value = opts[prop];\n    if (value !== undefined) {\n        if (type !== 'boolean' && type !== 'string') {\n            throw new TypeError('invalid type');\n        }\n        if (type === 'boolean') {\n            value = new Boolean(value);\n        }\n        if (type === 'string') {\n            value = new String(value);\n        }\n        if (values !== undefined && !values.filter(function (val) { return val == value; }).length) {\n            throw new RangeError(value + \" in not within \" + values);\n        }\n        return value;\n    }\n    return fallback;\n}\nfunction intersection(arr1, arr2) {\n    return arr1.filter(function (s) { return ~arr2.indexOf(s); });\n}\nvar DEFAULT_LOCALE = new Intl.NumberFormat().resolvedOptions().locale;\nvar RelativeTimeFormat = /** @class */ (function () {\n    function RelativeTimeFormat() {\n        var _a = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            _a[_i] = arguments[_i];\n        }\n        var locales = _a[0], options = _a[1];\n        // test262/test/intl402/RelativeTimeFormat/constructor/constructor/newtarget-undefined.js\n        // Cannot use `new.target` bc of IE11 & TS transpiles it to something else\n        var newTarget = this && this instanceof RelativeTimeFormat ? this.constructor : void 0;\n        if (!newTarget) {\n            throw new TypeError(\"Intl.RelativeTimeFormat must be called with 'new'\");\n        }\n        var opts = options === undefined ? Object.create(null) : toObject(options);\n        if (locales === undefined) {\n            this._locale = DEFAULT_LOCALE;\n        }\n        else {\n            var resolvedLocales = resolveLocale(intersection(Intl.NumberFormat.supportedLocalesOf(locales), Intl.PluralRules.supportedLocalesOf(locales)).concat([\n                DEFAULT_LOCALE,\n            ]));\n            if (resolvedLocales.length < 1) {\n                throw new Error('No locale data has been added to IntlRelativeTimeFormat for: ' +\n                    resolvedLocales.join(', ') +\n                    ', or the default locale: ' +\n                    DEFAULT_LOCALE);\n            }\n            this._locale = resolvedLocales[0];\n        }\n        this._localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        this._style = getOption(opts, 'style', 'string', ['long', 'narrow', 'short'], 'long');\n        this._numeric = getOption(opts, 'numeric', 'string', ['always', 'auto'], 'always');\n        this._fields = findFields(this._locale);\n        this._nf = new Intl.NumberFormat(this._locale);\n        this._pl = new Intl.PluralRules(this._locale);\n        this._numberingSystem = this._nf.resolvedOptions().numberingSystem;\n    }\n    RelativeTimeFormat.prototype.format = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value);\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return result;\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        return msg.replace(/\\{0\\}/, this._nf.format(Math.abs(parsedValue)));\n    };\n    RelativeTimeFormat.prototype.formatToParts = function (value, unit) {\n        validateInstance(this, 'format');\n        var resolvedUnit = validateUnit(unit);\n        var parsedValue = validateValue(value, 'formatToParts');\n        var _a = this, style = _a._style, numeric = _a._numeric;\n        var fieldData = findFieldData(this._fields, resolvedUnit, style);\n        if (!fieldData) {\n            throw new Error(\"Unsupported unit \" + unit);\n        }\n        var relative = fieldData.relative, relativeTime = fieldData.relativeTime;\n        var result = '';\n        // We got a match for things like yesterday\n        if (numeric == 'auto' &&\n            (result = relative[String(parsedValue)] || '')) {\n            return [\n                {\n                    type: 'literal',\n                    value: result,\n                },\n            ];\n        }\n        var selector = this._pl.select(parsedValue);\n        var futureOrPastData = relativeTime[resolvePastOrFuture(parsedValue)];\n        var msg = futureOrPastData[selector] || futureOrPastData.other;\n        var valueParts = this._nf\n            .formatToParts(Math.abs(parsedValue))\n            .map(function (p) { return (__assign({}, p, { unit: resolvedUnit })); });\n        return msg\n            .split(/(\\{0\\})/)\n            .filter(isString)\n            .reduce(function (parts, str) { return parts.concat((str === '{0}'\n            ? valueParts\n            : [{ type: 'literal', value: str }])); }, []);\n    };\n    RelativeTimeFormat.prototype.resolvedOptions = function () {\n        validateInstance(this, 'resolvedOptions');\n        // test262/test/intl402/RelativeTimeFormat/prototype/resolvedOptions/type.js\n        var opts = Object.create(Object.prototype);\n        Object.defineProperties(opts, {\n            locale: {\n                value: this._locale,\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            style: {\n                value: this._style.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            numeric: {\n                value: this._numeric.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n            numberingSystem: {\n                value: this._numberingSystem.valueOf(),\n                writable: true,\n                enumerable: true,\n                configurable: true,\n            },\n        });\n        return opts;\n    };\n    RelativeTimeFormat.prototype.toString = function () {\n        return '[object Intl.RelativeTimeFormat]';\n    };\n    RelativeTimeFormat.__addLocaleData = function () {\n        var data = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            data[_i] = arguments[_i];\n        }\n        for (var _a = 0, data_1 = data; _a < data_1.length; _a++) {\n            var datum = data_1[_a];\n            if (!(datum && datum.locale)) {\n                throw new Error('Locale data provided to RelativeTimeFormat is missing a ' +\n                    '`locale` property value');\n            }\n            RelativeTimeFormat.__localeData__[datum.locale.toLowerCase()] = datum;\n        }\n    };\n    RelativeTimeFormat.__setLanguageAliases = function (aliases) {\n        RelativeTimeFormat.__languageAliases__ = aliases;\n    };\n    RelativeTimeFormat.supportedLocalesOf = function (locales) {\n        var _a = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            _a[_i - 1] = arguments[_i];\n        }\n        var opts = _a[0];\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-toobject.js\n        var localeMatcher = 'best fit';\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/options-null.js\n        if (opts === null) {\n            throw new TypeError('opts cannot be null');\n        }\n        if (opts) {\n            localeMatcher = getOption(opts, 'localeMatcher', 'string', ['best fit', 'lookup'], 'best fit');\n        }\n        // test262/test/intl402/RelativeTimeFormat/constructor/supportedLocalesOf/result-type.js\n        return resolveLocale(intersection(Intl.NumberFormat.supportedLocalesOf(locales, { localeMatcher: localeMatcher }), Intl.PluralRules.supportedLocalesOf(locales, { localeMatcher: localeMatcher })).slice());\n    };\n    RelativeTimeFormat.__localeData__ = {};\n    RelativeTimeFormat.__languageAliases__ = {};\n    RelativeTimeFormat.polyfilled = true;\n    return RelativeTimeFormat;\n}());\nexport default RelativeTimeFormat;\n","import IntlRelativeTimeFormat from './core';\nimport defaultLocale from './en';\nIntlRelativeTimeFormat.__addLocaleData(defaultLocale);\nexport * from './core';\nexport * from './types';\nexport default IntlRelativeTimeFormat;\n","/* @generated */\n// prettier-ignore  \nexport default { \"locale\": \"en\", \"fields\": { \"year\": { \"displayName\": \"year\", \"relative\": { \"0\": \"this year\", \"1\": \"next year\", \"-1\": \"last year\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} year\", \"other\": \"in {0} years\" }, \"past\": { \"one\": \"{0} year ago\", \"other\": \"{0} years ago\" } } }, \"year-short\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"year-narrow\": { \"displayName\": \"yr.\", \"relative\": { \"0\": \"this yr.\", \"1\": \"next yr.\", \"-1\": \"last yr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} yr.\", \"other\": \"in {0} yr.\" }, \"past\": { \"one\": \"{0} yr. ago\", \"other\": \"{0} yr. ago\" } } }, \"quarter\": { \"displayName\": \"quarter\", \"relative\": { \"0\": \"this quarter\", \"1\": \"next quarter\", \"-1\": \"last quarter\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} quarter\", \"other\": \"in {0} quarters\" }, \"past\": { \"one\": \"{0} quarter ago\", \"other\": \"{0} quarters ago\" } } }, \"quarter-short\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"quarter-narrow\": { \"displayName\": \"qtr.\", \"relative\": { \"0\": \"this qtr.\", \"1\": \"next qtr.\", \"-1\": \"last qtr.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} qtr.\", \"other\": \"in {0} qtrs.\" }, \"past\": { \"one\": \"{0} qtr. ago\", \"other\": \"{0} qtrs. ago\" } } }, \"month\": { \"displayName\": \"month\", \"relative\": { \"0\": \"this month\", \"1\": \"next month\", \"-1\": \"last month\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} month\", \"other\": \"in {0} months\" }, \"past\": { \"one\": \"{0} month ago\", \"other\": \"{0} months ago\" } } }, \"month-short\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"month-narrow\": { \"displayName\": \"mo.\", \"relative\": { \"0\": \"this mo.\", \"1\": \"next mo.\", \"-1\": \"last mo.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} mo.\", \"other\": \"in {0} mo.\" }, \"past\": { \"one\": \"{0} mo. ago\", \"other\": \"{0} mo. ago\" } } }, \"week\": { \"displayName\": \"week\", \"relative\": { \"0\": \"this week\", \"1\": \"next week\", \"-1\": \"last week\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} week\", \"other\": \"in {0} weeks\" }, \"past\": { \"one\": \"{0} week ago\", \"other\": \"{0} weeks ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-short\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"week-narrow\": { \"displayName\": \"wk.\", \"relative\": { \"0\": \"this wk.\", \"1\": \"next wk.\", \"-1\": \"last wk.\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} wk.\", \"other\": \"in {0} wk.\" }, \"past\": { \"one\": \"{0} wk. ago\", \"other\": \"{0} wk. ago\" } }, \"relativePeriod\": \"the week of {0}\" }, \"day\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-short\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"day-narrow\": { \"displayName\": \"day\", \"relative\": { \"0\": \"today\", \"1\": \"tomorrow\", \"-1\": \"yesterday\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} day\", \"other\": \"in {0} days\" }, \"past\": { \"one\": \"{0} day ago\", \"other\": \"{0} days ago\" } } }, \"hour\": { \"displayName\": \"hour\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hour\", \"other\": \"in {0} hours\" }, \"past\": { \"one\": \"{0} hour ago\", \"other\": \"{0} hours ago\" } } }, \"hour-short\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"hour-narrow\": { \"displayName\": \"hr.\", \"relative\": { \"0\": \"this hour\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} hr.\", \"other\": \"in {0} hr.\" }, \"past\": { \"one\": \"{0} hr. ago\", \"other\": \"{0} hr. ago\" } } }, \"minute\": { \"displayName\": \"minute\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} minute\", \"other\": \"in {0} minutes\" }, \"past\": { \"one\": \"{0} minute ago\", \"other\": \"{0} minutes ago\" } } }, \"minute-short\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"minute-narrow\": { \"displayName\": \"min.\", \"relative\": { \"0\": \"this minute\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} min.\", \"other\": \"in {0} min.\" }, \"past\": { \"one\": \"{0} min. ago\", \"other\": \"{0} min. ago\" } } }, \"second\": { \"displayName\": \"second\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} second\", \"other\": \"in {0} seconds\" }, \"past\": { \"one\": \"{0} second ago\", \"other\": \"{0} seconds ago\" } } }, \"second-short\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } }, \"second-narrow\": { \"displayName\": \"sec.\", \"relative\": { \"0\": \"now\" }, \"relativeTime\": { \"future\": { \"one\": \"in {0} sec.\", \"other\": \"in {0} sec.\" }, \"past\": { \"one\": \"{0} sec. ago\", \"other\": \"{0} sec. ago\" } } } } };\n"],"names":["VALID_UNITS","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","this","resolveLocale","locales","len","localeParts","data","localeData","RelativeTimeFormat","__localeData__","languageAliases","__languageAliases__","resolvedLocales","Array","isArray","filter","map","l","supportedLocales","toLowerCase","split","join","push","locale","pop","findFieldData","fields","unit","style","objectIs","x","y","is","resolvePastOrFuture","value","validateInstance","instance","method","TypeError","String","validateUnit","indexOf","RangeError","slice","validateValue","parsedValue","Number","valueOf","isFinite","isString","getOption","opts","prop","type","values","fallback","undefined","Boolean","val","intersection","arr1","arr2","DEFAULT_LOCALE","Intl","NumberFormat","resolvedOptions","format","resolvedUnit","_style","numeric","_numeric","fieldData","_fields","Error","relative","relativeTime","result","selector","_pl","select","futureOrPastData","other","replace","_nf","Math","abs","formatToParts","msg","valueParts","reduce","parts","str","concat","create","defineProperties","_locale","writable","enumerable","configurable","numberingSystem","_numberingSystem","toString","__addLocaleData","_i","_a","data_1","datum","__setLanguageAliases","aliases","supportedLocalesOf","localeMatcher","PluralRules","polyfilled","options","constructor","arg","toObject","_localeMatcher","parentLocale","findFields","year","displayName","0","1","-1","future","one","past","year-short","year-narrow","quarter","quarter-short","quarter-narrow","month","month-short","month-narrow","week","relativePeriod","week-short","week-narrow","day","day-short","day-narrow","hour","hour-short","hour-narrow","minute","minute-short","minute-narrow","second","second-short","second-narrow"],"mappings":"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"}